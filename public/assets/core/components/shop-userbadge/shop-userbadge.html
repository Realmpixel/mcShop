<dom-module id="shop-userbadge">
    <style>
    	:host{
    		position: relative;
    		width: 100%;
    		display: block;
    		overflow: hidden;
    	}
    	:host div{
    		display: flex;
    		flex-direction: column;
    		width: 100%;
    		height: 100%;
    	}
    	:host #userBadgeInner>span#userBadgeName{
    		flex: 1;
    	}
    	:host #userBadgeInner>span{
    		flex: 2;
    		padding: 16px;
    		display: flex;
    		align-items: center;
    	}
    	:host #userBadgeImage>img{
    		border-radius: 50%;
    		background-color: #FFF;
    		width: 48px;
    		height: 48px;
    	}
    	:host #userBadgeLoader{
    		position: absolute;
    		left: 0;top: 0;
    		align-items: center;
    		justify-content: center;
    		background-color: #FFF;
    		transition: background-color 0.5s ease-out;
    	}
    </style>
  	<template>
	    <iron-ajax method="POST" auto url="../../../../api/auth:me" handle-as="json" on-response="response" lastResponse="{{shopacc}}" debounce-duration="300"></iron-ajax>
	    <div id="userBadgeLoader">
	    	<paper-spinner active></paper-spinner>
	    </div>
	    <div id="userBadgeInner">
	    	<span id="userBadgeImage"><img src=""></span>
	    	<span id="userBadgeName"><span></span></span>
	    </div>
  	</template>
</dom-module>
<script>
	Polymer({
		is: "shop-userbadge",
		created: function(){
			this.style.height = ((9/16)*256)+"px";
		},
		response: function(data){
			document.getElementById("userBadgeName").children[0].innerHTML = data.detail.response.accname;
			document.getElementById("userBadgeImage").children[0].src = "https://minotar.net/avatar/"+data.detail.response.username;
			//document.getElementById("userBadgeName").innerHTML = data.detail.response.userid;
			document.getElementById("userBadgeLoader").style.backgroundColor = "rgba(0, 0, 0, 0)";
			document.getElementById("userBadgeLoader").children[0].active = false;
			console.log(data.detail.response);
		},
	})
</script>